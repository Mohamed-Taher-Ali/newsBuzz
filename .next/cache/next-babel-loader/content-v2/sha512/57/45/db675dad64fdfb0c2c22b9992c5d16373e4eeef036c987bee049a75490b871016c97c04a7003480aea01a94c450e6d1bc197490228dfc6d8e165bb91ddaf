{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/moslem/Downloads/nextTest/pages/index.js\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nexport default function NewsBuzz() {\n  let {\n    0: news,\n    1: setNews\n  } = useState([]),\n      {\n    0: page,\n    1: setPage\n  } = useState(1),\n      {\n    0: isFetching,\n    1: setIsFetching\n  } = useState(false); // useEffect(()=>{getNewsFunc()}, [])\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n  useEffect(() => {\n    if (!isFetching) return;\n    getNewsFunc();\n  }, [isFetching]);\n\n  let handleScroll = () => {\n    if (window.innerHeight + document.documentElement.scrollTop !== document.documentElement.offsetHeight) return;\n    setIsFetching(true);\n  };\n\n  let getNewsFunc = async () => {\n    let nextPage = page + 1;\n    let reqNews = await axios.get(`/api/getNews?page=${nextPage}`);\n\n    if (reqNews.data) {\n      setNews([...news, reqNews.data]);\n      setIsFetching(false);\n      setPage(nextPage);\n      console.log(reqNews.data);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"asdas\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 5\n  }, this);\n}","map":{"version":3,"sources":["/home/moslem/Downloads/nextTest/pages/index.js"],"names":["useEffect","useState","axios","NewsBuzz","news","setNews","page","setPage","isFetching","setIsFetching","window","addEventListener","handleScroll","removeEventListener","getNewsFunc","innerHeight","document","documentElement","scrollTop","offsetHeight","nextPage","reqNews","get","data","console","log"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAIA,eAAe,SAASC,QAAT,GAAoB;AAEjC,MAAI;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBJ,QAAQ,CAAC,EAAD,CAA9B;AAAA,MACI;AAAA,OAACK,IAAD;AAAA,OAAOC;AAAP,MAAkBN,QAAQ,CAAC,CAAD,CAD9B;AAAA,MAEI;AAAA,OAACO,UAAD;AAAA,OAAaC;AAAb,MAA8BR,QAAQ,CAAC,KAAD,CAF1C,CAFiC,CAMjC;;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdU,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCC,YAAlC;AACA,WAAO,MAAMF,MAAM,CAACG,mBAAP,CAA2B,QAA3B,EAAqCD,YAArC,CAAb;AACD,GAHQ,EAGN,EAHM,CAAT;AAKAZ,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACQ,UAAL,EAAiB;AACjBM,IAAAA,WAAW;AACZ,GAHQ,EAGN,CAACN,UAAD,CAHM,CAAT;;AAKA,MAAII,YAAY,GAAG,MAAM;AACvB,QACEF,MAAM,CAACK,WAAP,GAAqBC,QAAQ,CAACC,eAAT,CAAyBC,SAA9C,KACAF,QAAQ,CAACC,eAAT,CAAyBE,YAF3B,EAGE;AACFV,IAAAA,aAAa,CAAC,IAAD,CAAb;AACD,GAND;;AAQA,MAAIK,WAAW,GAAG,YAAY;AAC5B,QAAIM,QAAQ,GAAGd,IAAI,GAAG,CAAtB;AACA,QAAIe,OAAO,GAAG,MAAMnB,KAAK,CACtBoB,GADiB,CACZ,qBAAoBF,QAAS,EADjB,CAApB;;AAGA,QAAIC,OAAO,CAACE,IAAZ,EAAkB;AAChBlB,MAAAA,OAAO,CAAC,CAAC,GAAGD,IAAJ,EAAUiB,OAAO,CAACE,IAAlB,CAAD,CAAP;AACAd,MAAAA,aAAa,CAAC,KAAD,CAAb;AACAF,MAAAA,OAAO,CAACa,QAAD,CAAP;AAEAI,MAAAA,OAAO,CAACC,GAAR,CAAYJ,OAAO,CAACE,IAApB;AACD;AACF,GAZD;;AAcA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAKD","sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"axios\";\n\n\n\nexport default function NewsBuzz() {\n\n  let [news, setNews] = useState([]),\n      [page, setPage] = useState(1),\n      [isFetching, setIsFetching] = useState(false)\n\n  // useEffect(()=>{getNewsFunc()}, [])\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, []);\n  \n  useEffect(() => {\n    if (!isFetching) return;\n    getNewsFunc();\n  }, [isFetching]);\n\n  let handleScroll = () => {\n    if (\n      window.innerHeight + document.documentElement.scrollTop !==\n      document.documentElement.offsetHeight\n    ) return;\n    setIsFetching(true);\n  };\n\n  let getNewsFunc = async () => {\n    let nextPage = page + 1;\n    let reqNews = await axios\n      .get(`/api/getNews?page=${nextPage}`);\n\n    if (reqNews.data) {\n      setNews([...news, reqNews.data]);\n      setIsFetching(false);\n      setPage(nextPage);\n\n      console.log(reqNews.data);\n    }\n  }\n  \n  return (\n    <div>\n      asdas\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}